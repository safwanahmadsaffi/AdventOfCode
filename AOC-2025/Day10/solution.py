import re
from fractions import Fraction
import sys

# Increase recursion depth just in case, though likely not needed for this problem size
sys.setrecursionlimit(2000)

def solve_part_two(input_text):
    machines = parse_input(input_text)
    total_min_presses = 0
    
    for i, machine in enumerate(machines):
        min_presses = solve_machine(machine)
        if min_presses is not None:
            total_min_presses += min_presses
        else:
            # It's possible a machine has no solution, though AoC usually guarantees one.
            # print(f"Machine {i} has no solution.")
            pass
            
    return total_min_presses

def parse_input(text):
    machines = []
    lines = text.strip().split('\n')
    
    # Regex to capture the parts: ignore [...] diagram, capture (...) groups, capture {...} group
    # Handling the "" prefix if present
    
    for line in lines:
        line = line.strip()
        if not line: continue
        
        # Find the start of the relevant data (first '[' that looks like a diagram)
        # We look for the last section enclosed in {} for targets
        # And the sections in () for buttons
        
        # Extract diagram pattern
        diagram_match = re.search(r'\[([.#]+)\]', line)
        if not diagram_match: continue
        diagram = diagram_match.group(1)
        
        # Extract targets
        target_match = re.search(r'\{([0-9,]+)\}', line)
        if not target_match: continue
        targets = [int(x) for x in target_match.group(1).split(',')]
        
        # Extract buttons
        # We look for patterns like (0,1,2)
        # Note: We must ensure we don't pick up garbage if format is weird, 
        # but standard (...) search between diagram and targets works.
        
        # Extract the substring containing buttons to avoid confusion
        # Usually between ] and {
        start_idx = line.find(']')
        end_idx = line.find('{')
        if start_idx == -1 or end_idx == -1: continue
        
        button_str = line[start_idx+1:end_idx]
        button_matches = re.findall(r'\(([0-9,]+)\)', button_str)
        
        buttons = []
        for b_str in button_matches:
            # Handle single number case "(3)" vs "(1,2)"
            indices = [int(x) for x in b_str.split(',')]
            buttons.append(indices)
            
        machines.append({'targets': targets, 'buttons': buttons, 'diagram': diagram})
        
    return machines

def solve_machine(machine):
    targets = machine['targets']
    buttons = machine['buttons']
    
    num_vars = len(buttons) # columns
    num_eqs = len(targets)  # rows
    
    # Build Matrix A and vector b
    # A[row][col]
    A = [[0] * num_vars for _ in range(num_eqs)]
    for col, btn_indices in enumerate(buttons):
        for row in btn_indices:
            if row < num_eqs: # Ensure index is within targets range
                A[row][col] = 1
                
    b = [Fraction(x) for x in targets]
    M = [[Fraction(x) for x in row] for row in A]
    
    # Gaussian Elimination
    pivot_row = 0
    pivots = {} # col -> row
    free_vars = []
    
    # Forward Elimination
    for col in range(num_vars):
        if pivot_row >= num_eqs:
            free_vars.append(col)
            continue
            
        # Find pivot in current column
        curr = pivot_row
        while curr < num_eqs and M[curr][col] == 0:
            curr += 1
            
        if curr == num_eqs:
            free_vars.append(col)
            continue
            
        # Swap rows
        M[pivot_row], M[curr] = M[curr], M[pivot_row]
        b[pivot_row], b[curr] = b[curr], b[pivot_row]
        
        # Normalize pivot row
        div = M[pivot_row][col]
        for j in range(col, num_vars):
            M[pivot_row][j] /= div
        b[pivot_row] /= div
        
        # Eliminate other rows
        for i in range(num_eqs):
            if i != pivot_row:
                factor = M[i][col]
                if factor != 0:
                    for j in range(col, num_vars):
                        M[i][j] -= factor * M[pivot_row][j]
                    b[i] -= factor * b[pivot_row]
        
        pivots[col] = pivot_row
        pivot_row += 1
        
    # Check consistency (0 = non-zero)
    for i in range(pivot_row, num_eqs):
        if b[i] != 0:
            return None # No solution
            
    # Calculate bounds for free variables
    # A free variable x[j] can't be larger than b_original[i] if A_original[i][j] == 1
    # Because x >= 0 and sum(x) = b
    var_bounds = [float('inf')] * num_vars
    original_b = machine['targets']
    
    for j in range(num_vars):
        limit = float('inf')
        relevant = False
        for i in range(num_eqs):
            if A[i][j] == 1:
                relevant = True
                limit = min(limit, original_b[i])
        
        if not relevant:
            # Button affects no counters. To minimize sum, press 0 times.
            limit = 0
            
        var_bounds[j] = limit

    # Backtracking search
    best_total = float('inf')
    
    def backtrack(idx, current_free_vals):
        nonlocal best_total
        
        # Pruning (optional, simplest is just bounds)
        
        if idx == len(free_vars):
            # Calculate pivot variables
            current_x = [0] * num_vars
            current_sum = 0
            
            # Assign free variables
            for f_idx, f_col in enumerate(free_vars):
                val = current_free_vals[f_idx]
                current_x[f_col] = val
                current_sum += val
            
            # Solve for pivots
            possible = True
            for p_col in sorted(pivots.keys(), reverse=True): # Order doesn't strictly matter for calculation
                row = pivots[p_col]
                val = b[row]
                for f_col in free_vars:
                    val -= M[row][f_col] * current_x[f_col]
                
                # Check constraints
                if val.denominator != 1:
                    possible = False; break
                val_int = val.numerator
                if val_int < 0:
                    possible = False; break
                
                current_x[p_col] = val_int
                current_sum += val_int
            
            if possible:
                if current_sum < best_total:
                    best_total = current_sum
            return

        # Try values for current free variable
        f_col = free_vars[idx]
        limit = var_bounds[f_col]
        
        # Heuristic optimization: try smallest values first?
        # Since we minimize sum, smaller free vars usually (but not always) lead to smaller sums.
        # But pivots compensate.
        
        # Safety cap for limit if infinite (shouldn't happen with correct logic)
        if limit == float('inf'): limit = 0
        
        # If the limit is excessively large, this approach might slow down, 
        # but AoC inputs usually constrain this.
        
        for val in range(limit + 1):
            # Optimization: if partial sum already exceeds best_total, break?
            # Hard to do because pivot contributions are unknown (could be negative coefficient in RREF?)
            # Actually, M[row][f_col] can be non-zero.
            backtrack(idx + 1, current_free_vals + [val])

    backtrack(0, [])
    
    return best_total if best_total != float('inf') else None

# Read input from the provided context
input_data = """[###.] (0,3) (0,2,3) (1,3) (0,1,3) {117,15,2,128}
[...##..] (2,3) (5,6) (0,1,3,4,5) (0,1,2,6) (2,3,4,5,6) (0,1,5) {12,12,13,13,2,31,19}
[.###.#..#.] (0,1,3,7,8) (0,1,2,3,4,6,7,9) (0,1,3,5,6,8,9) (3,8) (1,6,7,9) (2,8) (1,3,5) (0,6,9) (4,8) (0,1,3,6,7,8,9) (0,2,5,6,8) {51,33,24,38,16,22,58,25,54,44}
[#.##] (0,1,2,3) (0,2,3) {9,1,9,9}
[##.###] (0,1,4,5) (0,1,3,5) (0,1,4) (2,3) (0,1,3,4,5) (1,3) {43,59,16,39,38,25}
[##.##.####] (2,6,8) (2,5,6,7,8,9) (0,1,6,7,8,9) (0,1,2,5,6,7,8,9) (3,4) (0,1,3,4,5,6,7,9) (3,4,7,8,9) (1,2,4) {24,40,67,26,42,34,62,64,81,64}
[##...#..#] (1,4,5,6,7) (0,2,3,4,5,6,8) (1,2,4,7,8) (0,2,5,6,8) (0,1,5,7) (1,3,6) (3,5) (0,1,2,6) (2,3,7) {44,44,44,36,12,42,46,36,27}
[##...] (2,3) (1,4) (0,1,3,4) (0,1,3) (0,1,4) (0,3,4) {32,32,0,21,27}
[##.#...] (0,1,3,4,6) (0,4,6) (1,4,5) (0,1,2,3,4) (0,1,4) (0,2) (0,1,2,5) (2,4) {87,53,62,21,73,18,25}
[###.#..#..] (0,1,3,5,6,7,8,9) (7,9) (0,4,8) (0,1,2,6,7,9) (2,4,7) (0,1,2,3,4,5,7,8,9) (1,2,3,4,5,7,9) (0,1,5,9) (0,1,2,3,4,7,8,9) {190,192,169,50,50,45,147,196,48,203}
[..##...#.#] (6) (1,2,3,4,5,8,9) (5,6) (1,5,8,9) (0,2,3,5,6,7,8,9) (0,1,2,3,6,7,8,9) (2,3,7,9) (1,2,3,4,5,7,8,9) (0,1,6) (1,3,4,6,7,8) (2,4,5,9) (0,1,2,8) {29,70,55,43,37,57,36,32,57,63}
[.#...##] (3,4,5) (1,2,3,4,6) (0,2,3,4,5,6) (1,5,6) (0,2,3,5,6) (0,2,6) {161,25,177,164,148,157,186}
[.####] 
(1,2,4) (2) (2,3) (1,3,4) (0,1) (4) {15,43,31,21,32}
[.#.....#] (1,7) (2,3) (0,2,3,4,5,6,7) (1,4,5,7) (0,1,2,4,5) (0,3,6) {35,23,19,31,21,21,30,31}
[.##...#.] (1,3,4,5,7) (2,6) (0,1,3,4,7) (0,1,4,7) (1,2,4,5,7) (1,3,5,7) (0,2) (0,1,2,3,5) (0,1,2,3,4,5,6) {65,216,59,183,62,184,20,202}
[##...###] (1,2,3,4,5,7) (2,7) (3,4,7) (1,3) (0,1,2,3,6,7) (4,5) (0,5,7) (0,1,4,5,7) (0,1,3,5,6,7) {49,63,35,69,44,57,29,84}
[#####] (0,1,2,3) (0,3,4) (0,3) (0,1,2) (1,2) {31,138,138,22,0}
[.######] (0,2,3,5,6) (0,2,3,4,5,6) (3,5,6) (1,2,6) (0,2,4,5) (1) (0,2,3,4,5) {40,8,43,219,35,237,221}
[##...] (0,2,4) (1,2,3,4) (2,3) (1,2,3) (0,1,2) (0,1,4) {31,34,62,33,21}
[..#.#....#] (3,4,5) (0,5,6,7) (0,1,2,3,4,6,8) (1,3,4,8) (6,9) (2,7) (3,4,5,6,7) (1,3,6,8,9) (1,3,4,5,6,7,8,9) (2,3,5,6,7,9) {28,52,36,101,81,72,90,60,52,45}
[###.#.#] (0,5,6) (1,2,5,6) (0,2,5,6) (3,6) (0,1,2,3,5) (0,2,3,4,5,6) {34,21,23,25,2,41,36}
[.##.#....] (0,4,6,8) (1,5) (0,1,2,6,8) (0,1,4,6,7) (0,5,6) (0,2,3,6,7,8) (2,4,7,8) (0,1,3,5,6,7,8) {45,23,17,19,19,30,45,31,34}
[.####...] (0,3,4,7) (0,4,5,6,7) (1,3,4,5,6,7) (0,1,2,3,5,7) (2,6) (4,6) (0,3,7) {45,11,25,44,47,18,50,51}
[.#....] (0,4,5) (1,2,4,5) (0,2,4) (1,2,3,4) (0,1,3,4) {18,23,21,20,34,9}
[#.##] (1,3) (0,2,3) {155,5,155,160}
[##..] (1,2,3) 
(0,1) (0,3) {144,37,19,145}
[#.#.##..##] (0,1,2,3,6,8) (0,1,2,6,8,9) (1,2,3,5,6,7,8,9) (0,1,3,5,7,8,9) (1,2,3,5,6,7) (1,2,4,5,6,7,8,9) (0,1,2,3,4,5,6,7,8) (2,3,5,7,8,9) (1,3,4,5,6,7,8,9) (0,1,3,4,5,6,8,9) {60,91,78,95,42,82,88,66,106,78}
[#.##.##] (1,2,3,5) (0,6) (2,3,4,5) (1,2,4,5) (2) (0,3,5) (1,2,6) (0,1,2,4,5) (0,2,3,4,5) {55,40,81,33,48,54,33}
[.#####..] (0,1,3,5) (2,3,4,5,6,7) (0,1,2,3,4,7) (0,2) (1,2,3,4,5) (3,6) (1,2,5,7) (0,1,2,4,7) {30,45,48,46,30,30,16,27}
[####.] (2,3,4) (0,1,2,4) (3,4) (0,3,4) {115,110,114,17,127}
[###..#] (1,4,5) (2,3,4,5) (3,5) (0,3,5) (1,3,4) {13,22,19,63,41,53}
[###.] (0,1) (0,2) (0,2,3) (2,3) (0,1,3) {38,20,37,37}
[.#..] (0) (2) (3) (0,1) {199,15,15,19}
[..#..#] (2,3,4,5) (1,2,3,4) (4) (0,1,2) (0) (3,4,5) (1,2,3,4,5) {7,20,21,30,45,17}
[#.#..] (2,4) (1,3,4) (0,4) (0,1) {25,23,16,6,30}
[..#.#..] (0,1,2,4,5,6) (0,2,3,5,6) (0,1,3,5,6) (0,5) (0,3,4,5,6) (0,1,2,3,5,6) {51,19,23,26,18,51,37}
[##..##] (1,2,4,5) (0,1,4,5) (0,3) (1,2,3,4) (3,5) (0,2,3,4) (2,5) {23,12,25,40,28,26}
[....###..] (2,3,4,5) (4,5,6,7) (0,1,3,7) (3,5,6) (3,4,8) (0,2,4,5,7,8) (4,5,6) (0,1,3,4,5,7,8) (0,1,2,3,4,5,6) {24,18,13,37,59,48,32,18,31}
[.##...] (0,1,3,5) (4,5) (3,5) (1,2,3,5) (2,3,5) {2,11,19,41,3,44}
[.###] (0,3) 
(1,2) (1,3) (2) (0,1) (3) {11,21,22,30}
[.#.#.] (1) (1,3,4) (1,2,3,4) (0,2,3) (2,4) (0,2,4) {22,40,54,25,54}
[#####.] (1,3,4,5) (1,3,5) (0,1,2,3,4) (1,2) {169,215,185,199,180,30}
[#.#######] (1,5) (4,5) (5,7) (0,1,3,6,8) (0,1,2,3,4,6,8) (1,5,7) (0,2,4,5) (1,2,4,5,7,8) (2,4) (0,1,2,3,4,7,8) (0,1,4,5,6) {40,73,52,7,76,284,25,232,21}
[##.##.###.] (4,8,9) (0,5,6,8,9) (0,1,3,6,7,9) (0,7) (0,1,3,4,5,7,8,9) (1,6) (1,2,3) (0,2,3,4,5,6,7,8) {225,217,19,215,31,40,233,213,43,211}
[...#####.#] (0,1,3,5,6,8,9) (3,4,5,6,7) (0,3,4,5,6,7,8,9) (0,1,2,4,5,7,9) (1,9) (0,2,4,5,6) (0,2,3,4,8,9) (1,2,4,5,7,8,9) (2,9) {46,50,51,43,60,69,50,43,53,85}
[.#..#] (2,3,4) (2,3) (1,2,3) (1,4) (0,1,2) (0,2,4) (4) {31,36,185,154,63}
[.#.##.#] (3) (0,1,4,5) (3,6) (0,1,2,3) (0,1,2,4,5) (0,3,5,6) (6) (0,4) (4,5) {47,28,24,53,31,46,48}
[.....#..#] (0,2,3) (0,1,2,3,4,5,6,8) (4,8) (0,1,2,3,7) (5,6,7) (1,2) (1,3,4,5,6,8) (0,1,2,4,5,6,7,8) (0,3,4,5,7) {52,56,51,51,56,56,52,46,52}
[.#.......] (2,3,4,5,6,7,8) (0,1,3) (0,2,5,6,7,8) (1,3,4,5,7) (1,2,3,4,5,8) (3,6,7) (0,4,7) (3,5) (2,3,4,7,8) (1,2,3,5,7,8) {23,16,32,65,57,42,30,78,32}
[##.#] (1,2,3) (0,2) (3) (0,3) (1,2) {13,20,29,29}
[##.#] (1,3) (0,3) (0,1,2) (3) {10,11,6,180}
[##..] (0,1,3) 
(2) (0,2) (2,3) {5,4,7,4}
[#..#] (1) (0,3) (1,2) (0,1) (2,3) {31,42,19,23}
[#..#.###.#] (0,4) (4,7) (0,2,3,4,6,7,8,9) (3) (0,6,8,9) (0,1,2,3,4,5,6,7,8) (0,1,2,6,8) (0,1,5,6,7,8,9) (6) (3,4,9) (1,3,5,6,7) (0,2,8) {75,58,45,69,72,41,79,69,59,38}
[.#####] (0,1,3) (3) (0,2) (1,2,3,5) (1,2,3,4,5) (2,3) (0,2,4,5) (0,3) {49,54,68,91,21,41}
[.####.##.] (2,3,4,5,8) (0,1,5,8) (1,2,3,4,6,7) (0,4,6,7) (0,3,7) (1,3,5) (0,1,2,3,5,6,7) {24,38,32,54,30,41,23,30,19}
[#..##....#] (2,3,4,5,6,9) (1,2,3,4,6,7,8) (2,4,9) (0,2,4,6,8) (1,9) (1,2,3,4,8) (5,6) (3,4,5,8) (2,3,4,5,7,8,9) (0,1,3,5,6,9) {39,45,96,92,110,77,79,30,73,77}
[.##.#] (0,1,2,3) (0,1,2,4) (1,2,4) {21,200,200,10,190}
[..#.#####] (2,4) (1,2,4,5,6,8) (0,1,2,3,5) (0,2,3,6) (5,8) (4,5,6) (0,1,2,3,4,5,7) {30,31,39,30,32,54,19,13,18}
[.#..#] (0,1,3,4) (1,4) (0,2,4) {7,21,4,3,25}
[##.###.#.] (6) (0,5) (0,2,3,4,7,8) (1,2,5,8) (0,3,4,5,6,8) (0,1,7) (1,3,4,5,7,8) {22,38,18,28,28,42,14,32,40}
[#.##....] (0,1,3,4,5,7) (1,2,5,6) (2,4,7) (1,4,5,7) (1,2,6,7) (1,2,3,4,5,6) (3,4,5) (0,5,6) (0,5) {23,44,44,23,41,62,38,42}
[..#....#] (0,1,2,3,4,5,7) (2,3,4,5,6,7) (2,7) (0,2,3,4,6,7) (4,5,6) (0,1,6) (1,2,3,4,6,7) {11,11,22,20,38,24,36,22}
[#.#.###.] (1,3) (0,1,2,5,6,7) (0,1,2,3,5,7) (0,2,5,6,7) (1,3,4) (2,3,4,5) (0,1,3,6,7) 
(2,4,5,6,7) {37,46,56,62,29,56,30,44}
[#.##] (1) (2,3) (2) (0,2) (1,2,3) {19,3,55,17}
[....##] (1,2,4,5) (2,5) (4) (0,1,2,5) (2,3,5) (0,1,3,5) (0,2) (0,2,3) {53,23,69,30,2,42}
[.#.#....] (2,3,5) (3,7) (1,2,4,5,6,7) (0,5) (0,6,7) (0,1,4,5,6,7) (1,2,5,7) (1,2,4,7) (1,5,7) (6) {20,31,19,10,16,44,34,35}
[#.#.#.#..#] (3,6,7,8,9) (1,3,4,5,6,8,9) (1,2,3,4,7,9) (0,1,2,3,4,5,7,8,9) (2,3,4,8) (0,3,5,6,9) (1,3) (0,1,4,6,7,8) (5,7) (0,1,2,5,6) (7,9) (0,1,2,3,4,6,8,9) (4,7,9) {53,76,67,83,58,35,58,45,42,72}
[#.#..##] (1,2,3,4,5) (0,1,2,6) (2,3) (0,4,5) (0,1,2,3,4) {49,44,59,41,46,35,18}
[..##..##] (1,4,6,7) (0,1,3,5,7) (1,3,7) (1,2,5,6,7) (1,3,6,7) (1,2) (1,2,4,5,6,7) (3) (0,1,2,4,6,7) (0,5,6) {42,95,32,54,30,35,68,82}
[####.####] (1,5,8) (4,5,6,7,8) (0,2,4,5,6,7,8) (0,2,4,7,8) (1,2,6) (0,1,2,3,4,5,8) (0,1,2) (1,4) {26,65,45,12,40,32,23,12,40}
[.###] (0,2,3) (0,1) (2,3) {27,10,26,26}
[##.#.#.] (1,2,3,4,5) (1,3) (0,1,2,3,4) (0,1,2,3,5,6) (1,2,3,5) (0,1,2,6) {32,52,49,43,24,25,17}
[#.#..#] (1,3,5) (1,2,5) (1,4) (0,2,4) (0,2,3,5) (0,1,2,3) {32,53,41,42,14,31}
[.###.#..] (0,4,5,7) (2,6) (0,2,3,4,5) (0,1,2,7) (0,1,2,3,6) (3,4,5,7) (3,7) (2,4,6,7) {48,15,51,48,58,41,36,61}
[#.#.#.] (1,2) (3,5) (0,1,3) (2,4,5) (2) 
(1,2,4) {3,28,39,11,9,12}
[#..###] (0,3,5) (4) (2,3,5) (0,3) (3,4,5) (0,3,4,5) (1,3,4) (0) {40,12,17,82,64,62}
[..#.##.] (0,3,4) (2,4,5) (2,3,4,5,6) (0,1,3,4,5,6) (1,2,3,5,6) {26,14,15,41,40,28,28}
[.#..] (1) (2,3) (0,3) (1,2) (0,2) (0,2,3) {41,154,46,34}
[###.#...] (4,5) (6,7) (1,4,7) (1,2,3,4,5,6) (0,1,3,5,6) (2,7) (0,6) (0,2,3,4,6) (2) {36,29,20,20,26,13,147,138}
[#..####.##] (0,1,3,4,6,8,9) (0,5,7,8) (2,8) (0,1,3,6) (0,1,2) (0,3,4,5,6,7,8,9) (2,3,5,8) (0,1,2,4,5,7,8,9) (0,1,2,4,5,7) (1,3,4,7) (2,3,6,7,8,9) {70,53,51,66,64,60,45,48,67,47}
[....#..#..] (0,1,2,3,5,6,7,8) (3,4,7) (0,3,4,6,7,8) (2,6) (0,2,3,4,5,8,9) (0,7,8,9) (2,8,9) (1,3,7,9) (5,8) (3) (0,1,3,4,5,7,8,9) {44,19,35,63,37,45,12,57,73,54}
[...##..#] (4,7) (3,4,5,7) (0,2,7) (0,1,5,6,7) (0,1,2,3,4,6,7) (1,6,7) {22,33,14,16,32,16,33,63}
[###..] (0,2,3) (2) (1,4) (0,3,4) (1,2,3) {31,5,199,36,12}
[#....#] (0,2,4) (0,2,3,4) (0,2,3) (1,4,5) (2,4,5) (0,1,3,5) (0,1,2,4) (0,3) {48,38,41,21,57,30}
[####..#] (3,4) (0,2,4,6) (3,4,6) (2,4) (0,1,3,5) (3,4,5,6) (3,6) {28,19,15,70,46,28,45}
[##.###.##.] (1,2,4,6) (5,6,9) (2,4,7,9) (1,2,3,6,7,8,9) (0,2,3,4,5,6,7,9) (0,1,2,4,5,6,7,8) (0,2,4,9) (1,2,5,7) (3,6,7,8,9) {28,23,71,16,59,166,175,45,7,203}
[.#...#.] (0,1,3,5) (1,2,6) 
(3,4,5,6) (2,5,6) (0,2,3,4,6) {36,23,23,49,29,37,36}
[##.##..#] (0,1,2,4,5,6,7) (2,3) (0,1,2,4,7) (1,4,5) (0,2,7) (1,2,4,6) (6) {32,34,51,10,34,6,22,32}
[######] (0,1,3,4) (2,5) (3,4) (0,1,5) (0,1,2,4,5) {29,29,18,26,39,21}
[#...#..#] (0,2,3,4,6,7) (1,5) (1,7) (3,4,5,6) (0,4,6) (3,4) {25,8,16,23,32,10,30,19}
[.###] (0,2,3) (1,2,3) {6,1,7,7}
[.##.#...] (0,2,3) (2,5,7) (0,1,3,4,5,6,7) (1,3,4,5,6) (3,7) (1,6) (1,2,5,6) (3,5,6,7) {22,37,42,50,17,44,37,35}
[###..] (0,2,3,4) (2,3) (0,1) (0,1,4) (0,1,3,4) (4) {30,24,6,11,17}
[##.##.###.] (0,5,8) (1,2,3,4,6,7,8,9) (1,2) (0,1,3,4,5,7,8,9) (0,3,4,7,8,9) (0,1,3,4,5,6,7,8) (1,4,9) (3,4,7,9) {25,47,29,53,55,19,26,53,38,42}
[..#..#..#] (3,4,6) (0,1,2,3,5,6,8) (7) (0,2,3,4,6,8) (0,2,3,4,7,8) (0,1,2,3,4,5,6,7) (1,2,3,4,5,6,8) (1,7) (0,5,7) {54,47,52,72,53,51,63,46,46}
[#.##.] (2,3) (0,2,3,4) (1,4) (1,2,3) (0,1) (2,3,4) {4,25,40,40,39}
[#..#.#.] (1,2,4,6) (2,3,4) (2,3,6) (3,4,6) (0,1,3,5,6) (1,2,3,5,6) (4,5,6) (0,1,2,4,6) (4,5) {6,28,50,34,45,24,49}
[.##.#] (0,1,3,4) (0,1,2) (1,2,4) {10,19,10,9,18}
[##.#######] (0,4,9) (0,6,9) (2,4,5) (1,3,5,6,7,8) (0,2,3,4,5,6,7,8) (0,5,6) (1,2,7,8) (2,3) (1,2,4,6,7) (1,2,5,6,8) (1,2,5,7,9) (0,1,4,5,6,7,8,9) {41,84,89,36,54,86,81,68,66,32}
[####.#####] (1,2,3,4,6,7,8,9) (1,4,6,9) (2,3,4,6,8,9) 
(3,7,8) (0,2,3,5,7) (0,1,3,4,5,8) (2,4,5,6,9) (0,2,5,7) {37,35,60,65,56,50,45,55,48,45}
[##.#] (0,1,3) (0,2,3) {26,11,15,26}
[.#..#.] (0,2,5) (0,1,3,5) (1,5) (0,3,4,5) {178,35,151,27,10,196}
[#.#..#] (1,2,5) (0,2,4,5) (0,3,4,5) (0,1,2,5) (0,1,2,3) (1,4) {32,36,32,6,34,34}
[###.#..] (0,1,2,3) (0,3,4,5) (0,2,4,6) (0,1,2,4) (0,2,3,4,5) (1,4,6) {45,46,43,17,50,2,37}
[..##.#.] (0,1,4,5) (0,2,3,5,6) (1,2,3,4) (0,1,3,4,6) (2,5) (3,6) (2,5,6) (1,2) {28,57,78,48,37,55,48}
[##..###] (2,3) (0,1) (0,1,5,6) (0,4,6) (0,3,6) (1,2,3,4,6) (1,2,3,6) {36,29,24,37,6,10,41}
[......##..] (0,1,3,6,7,8,9) (1,3,6) (0,1,3,4,6,8,9) (0,3,5,7,9) (5,6) (0,3,4,5,7) (1,8) (0,1,2,5,6) (0,1,2,3,5,6,8,9) {81,83,16,82,30,47,70,46,64,61}
[#.###..#] (1,4,5,7) (1,3,6) (1,7) (0,1,2,3,4,6) (0,2,3,4,5) (0,1,3,7) (1,3,5,6,7) (0,2,4,5,6,7) {47,77,36,50,53,49,50,70}
[########] (0,1,2,5,6,7) (0,2,3,5) (0,2,4,6) (5,6) (1,2,4,7) (0,1,2,5,6) {33,30,37,5,6,42,39,13}
[#.#.] (1,3) (1,2) (0,2) (2,3) {16,20,53,19}
[#.....##] (1,2,3,5,6,7) (5,7) (1,4) (1,5,7) (3,4,6,7) (0,1,4,6,7) (0,1,3,5,6,7) (0,1,2,3,4,5,7) (3,7) (0,2,6,7) {31,49,23,45,48,41,48,88}
[.#..##...] (0,2,4,5,8) (0,1,2,3,4,7) (0,2,4,5,6,8) (1,2,3,5,6,7) (7,8) (0,3,4,6) (0,3,4,5,7,8) (4,6) {199,6,195,12,214,192,200,24,207}
[#.#..] (0,2) (0,1,2,3,4) (0,1,3) {159,143,143,143,127}
[.##..] 
(3,4) (0,1,3,4) (2,3,4) (1,2) (0,1,3) {30,48,30,61,43}
[#.#.] (0,1) (0,2) (1,3) (1,2) (0,3) {43,25,17,31}
[#.##.####] (0,1,2,3,4,5,8) (0,1,2,3,5,7,8) (0,2,3,4,5,6,8) (1,2,4,5) (2,3,4,7) (1,4,5,7) (0,1,8) (0,1,7,8) (2,4,5,6,7,8) (1,2,3,4,6) {24,47,48,37,50,41,8,40,24}
[......####] (1,8) (0,3,4,6,7,8,9) (0,1,2,3,4,5,7,8) (2,5,7) (1,5,6) (2,3,4,6,7,9) (3,8) (3,5,6,7,8) (0,1,2,3,5,9) (0,1,2,4,5,7,9) (0,3,6) {55,63,49,241,53,62,47,72,245,43}
[#...#.#.##] (1,3,4,7) (3,7,9) (1,2,3,4,5,6,8,9) (4,5,9) (2,3,4) (0,4,5,6,7,9) (0,1,5,9) (2,5,6) (0,1,4,5,6,7,8,9) (2,3,5,6,9) (1,6) (0,2,3,4,5,6,7,8,9) (5) {57,61,52,57,81,113,101,74,39,93}
[#..#..##..] (1,5,6) (0,1,2,3,6,7,8) (0,3,4,5,7) (1,6,9) (8) (0,1,2,3,4,5,9) (1,2,4,6,7,9) (2,4,5,6,7,8,9) (0,1,2,3,5,8,9) (0,1,3,4,6,7,9) (0,1,2,3,4,5,7,8,9) {73,93,54,73,66,63,61,70,46,78}
[..#..##.] (0,1) (0,1,2,3,4,7) (0) (0,1,3,5) (4) (5,6) (3,4) (0,5,6) (1,2,4,5,7) (1,4,5,6,7) {54,59,19,27,57,76,41,31}
[..###.#] (2) (0,1,2,4,5,6) (0,1,3) (2,4,5) (4,5) (0,1,2,3,5) (0,3,6) (2,3,4,6) {69,49,58,59,62,67,50}
[.#.#.] (0,2,4) (1,3) (0,3) (0,1,2) {22,27,15,22,3}
[.####.#.#.] (0,3,4) (0,1,3,6,7,8,9) (2,4,9) (3,7,9) (0,1,2,6,7,9) (0,1,2,3,4,5,6) (0,3,4,5,6,8) (0,4,5,7) {95,52,50,71,75,50,68,72,36,70}
[###..##.#.] (8,9) (0,1,2,3,5,6,7,9) (2,6) (6) (0,1,5,6,9) 
(2,4,6,7,8,9) (0,1,2,3,6,7,8,9) (2,8) (4,7) (1,2,3,4,7,8) (0,3,4,6) (0,1,3,4,5,6,7,9) (3,5,7) {40,56,208,54,49,39,215,74,53,55}
[#..#] (2) (0,2,3) (0,1,2) {32,13,49,19}
[...#.#.] (0,4,6) (0,1,2,3,6) (0,1,2,3,4,6) (2,5) (0,1,2,5) (1,3,4,5,6) (0,1,2,4,5) {66,55,51,23,34,36,38}
[#.#..#..#] (0,3,4,5,6,7,8) (1,2,3,4,7) (1,3,6,7,8) (2,7) (1,2,4,5,6,7,8) (0,2,5,8) (0,2,8) (1,3,7) (0,5) (0,2,3,4,6,7) {60,25,74,57,53,32,42,80,38}
[###.] (0,1,2) (0,3) (0,1) (1,2,3) (3) (0) {22,13,9,32}
[..##] (1) (1,2,3) (0,2,3) {10,16,21,21}
[..##.##.##] (1,3,5,7,8,9) (4,5,8) (0,4,6) (1,5,6,7,8,9) (2,9) (5,6) (4,7,8,9) (1,8) (0,3,4,7,8,9) (4,5) {9,8,14,12,52,52,19,29,49,43}
[##....####] (0,3,5,9) (1,3) (6,9) (0,2,3,4,5,6,7,9) (2,3,5,6,8,9) (0,1,3,4,5,6,8,9) (0,1,2,3,4,6,7,9) (0,2,3,6,7) (2,3,6,8,9) (0,9) (1,2,3,4,5,6,7) (1,3,4,8,9) (1,3,4,5,6,7,8,9) {51,76,57,126,76,73,102,58,60,121}
[##.##] (1,2) (0,3,4) (2,3,4) (0,1,3,4) {12,23,27,19,19}
[#.###..##] (2,3,7,8) (0,8) (1,2,4,6,7) (2,5,6) (0,1,3) (1,2,3,4) (2,5) (0,2,4,8) {42,37,80,38,41,24,19,29,46}
[#.#.##.] (0,2,5) (1,5) (0,4,6) (1,3,6) (0,3) (0,4,5,6) {57,23,11,23,26,40,29}
[#...#..#] (4) (0,1,2,4,5) (2,3,4,5,6,7) (1,3,5) (0,4,7) (1,2,3,4,5,6) (6,7) (3) {23,30,26,31,52,42,23,32}
[###.#] (1,2,3) (0,4) 
(0,1,2) (1,2) (1,2,4) {15,161,161,6,13}
[.#.....] (2,3,4,5,6) (1,5) (1,3,4) (0,1,2,5,6) (0,1,3,6) (1,5,6) (1,3) (1,2,3,4,5) {24,100,34,54,29,64,39}
[.###] (2,3) (1,2,3) (2) (3) (0,1,3) (0,2) {136,136,56,150}
[.##...] (0,2,3,4,5) (0,4,5) (3,4) (0,1,5) {42,17,9,15,31,42}
[#.##] (0,2) (0,1) (2) (3) (1,2,3) (0,2,3) {34,15,53,30}
[##..###..] (1,3,4,5,6,7,8) (0,4,6) (0,2,4,6,7) (0,1,2,3,4,5,7) (0,3,4,5,6,7) (2,3,4,6,8) (5,7) (3,4,6,8) (4,8) (0,3,8) (0,1,2,3,4) {166,28,59,178,202,132,168,150,62}
[#.#.....] (0,3,4,7) (0,1,2,3,4,6,7) (0,1,4,5,6,7) (2,3,4,5,6) (0,1,3,4,5,7) (0,1,3,6,7) (0,1,2,4,5,6) {47,29,34,43,61,38,46,35}
[..###.#..] (6,8) (2,3,4,5,6,7,8) (0,1,2,5,7,8) (1,4,5) (0,1,4,5,6,7,8) (0,3,6,7) (1,2,5,7,8) (0,3,5) (0,1,2,8) (2,3,5,8) (1,8) {33,207,46,30,45,55,44,40,230}
[.#.#....] (1,3) (0,2,4,6,7) (4,6,7) (0,3,4,5,7) (0,2,3,4,5) (1,2) (0,2,3,4,6,7) {49,22,64,42,58,20,38,38}
[#.#..#..] (4,7) (0,1,3,4,7) (0,1,2,3,6) (0,2,3,6) (0,2,4,6) (1,5,6,7) {62,47,43,44,55,16,59,53}
[##.###.] (1,4,6) (0,1,3,4,5) (2,3,4,5) (4,6) (0,1,3,5) (2,3,6) (2,5) {12,27,24,27,47,35,27}
[..#..#.] (0,1) (0,2) (1,4) (2,3) (0,3,4,5) (0,2,3,4,6) (2,3,6) (4,5) (0,4,6) {67,32,35,25,76,17,43}
[#.##] (1,3) (0,2,3) {10,14,10,24}
[#..#.#.##] 
(0,1,2,3,4,5,7) (6,8) (0,1,3,5,6,7,8) (0,1,2,5,7) (4,6) (1,2,3,4,5,6,8) (0,1,5,6,7,8) (3,4,6,8) (1,3) (0,2,4,5,6,7) (3,6) {39,64,40,62,57,58,96,39,75}
[#..#####.] (0,4,8) (0,1,4,8) (3,7,8) (1,6,8) (1,2,3,4,5,6,7,8) (1,2,8) (0,1,3,4) (0,2,3,6,7,8) (5,7,8) (0,7) (0,1,4,5,6,7,8) {54,52,31,55,41,36,36,75,85}
[##.##] (3,4) (2,3) (2,3,4) (0,1,3,4) (1,2,3) (0,1,4) (4) {18,18,26,50,57}
[.#.####] (1,4,5) (1,3) (1) (0,2,4,6) (1,2,3,6) (2) (0,1,4) (1,3,4,5,6) (0,4,5,6) {33,46,13,32,50,34,47}
[..##.##] (2,5,6) (0,2,3) (1,2,4,5,6) (2,4) (0,1,2,5,6) (0,1,3,4,5) {27,40,63,14,30,60,53}
[####...#.] (4,6,7,8) (2,4,5,6,8) (2,5,6,7,8) (1,2,4,5,8) (0,1,2,4,5,7) (1,4,6,7) (0,3,5,8) {2,36,45,2,50,47,53,45,53}
[##..#] (0) (0,3,4) (0,1,2) (1,2,3) (2,3) (0,2,4) (0,1,2,4) {52,27,42,33,29}
[.......##] (0,1,2,4,6,8) (0,5) (2,7) (3,7,8) (0,1,2,5,6,7) (2,3,5,6,7,8) (7,8) (1,2,4,7) (1,2,5,6) (1,4,7) {35,58,56,9,32,50,39,60,13}
[##.##.] (0,1) (0,3,4,5) (0,1,3,4) (1,4) (1,2,4,5) (0,1,2,4,5) (0,1,2) (1,5) {50,79,32,25,69,49}
[####..##.] (0,1,2,3,7,8) (0,1,2,3,4,7,8) (1,2,3,5,6,7,8) (1,4) (0,1,2,3,4,5,7,8) (1,3) (0,1,4,5,8) (2,3) (0,1,2,5,6) {71,99,64,64,36,48,23,39,54}
[##.###] (0,4) (0,1,2,4) (0,4,5) (0,1,3,5) (0,1,2,3,5) 
(2,3,4) (1,2,4) {40,19,12,26,33,23}
[.#..#.] (0,1) (2,5) (1,2,3,5) (0,5) (3,4,5) (0) (0,1,2,3,4) {147,38,41,22,11,36}
[##.###.] (0,2,5,6) (0,1,2,3,4) (2,3,4) (1,3) (0,1,3,6) {41,46,29,48,18,11,25}
[###...#.#] (1,2,3,5,7,8) (2,3,4) (0,2,3,4,5,7) (0,1,2,5) (0,2,3,4,6,7,8) (1,2,3,5,6,8) (0,2,7,8) {197,37,229,50,32,47,26,178,186}
[.###.] (1,2,3) (4) (0,1,2,4) (1,4) (0,1,3) (0) (0,3) {42,43,31,29,33}
[.#..##.##.] (5,6,7,9) (4,7,8) (1,2,4,5,6,8,9) (1,2,4,5,7,9) (0,2,3,5,6,7,9) (0,1,2,3,7,8,9) (0,2,3,4,5,8,9) (2,3,4,5,6,7,8,9) (6) (1,2,3,4,6,7,8,9) (0,1,3,4,5,6,7,9) (0,1,2,3,4,6,7,8,9) (0,1,2,5) {55,62,69,54,48,47,67,78,53,75}
[###..#] (0,2,4,5) (0,2,3) (0,3,5) (0,1,2,5) {58,13,41,25,20,50}
[#.###.####] (0,1,2,3,5,8) (2,5,9) (2,6,7,9) (0,1,5) (1,2,3,4,5,6,7,8) (3,5,7,9) (1,4,6,7,8,9) (1,3) (0,5) (6,7) (0,3,4,5,6,9) (3,8) {42,229,30,234,30,66,49,52,37,44}
"""

print(solve_part_two(input_data))